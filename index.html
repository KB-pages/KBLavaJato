<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KB Lava Jato ‚Äî Site Oficial & Agendamento</title>

<!-- Font Awesome para √≠cones -->
<script src="https://kit.fontawesome.com/a81368914c.js" crossorigin="anonymous"></script>

<!-- CSS -->
<link rel="stylesheet" href="style.css">


<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, addDoc, query, where, getDocs, orderBy } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDQyboNI6oc2CSsENMYUWMM4N0A9zcF_NY",
  authDomain: "kb-lava-jato.firebaseapp.com",
  projectId: "kb-lava-jato",
  storageBucket: "kb-lava-jato.firebasestorage.app",
  messagingSenderId: "545896027646",
  appId: "1:545896027646:web:635af9813686f445dd1caf",
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db;
</script>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
emailjs.init("go_0mb59RZJWklf3S");
</script>

</head>
<body>

<!-- Header -->
<header>
<div class="logo" style="color:#ff7a00;font-weight:bold;font-size:24px;">KB</div>
<nav>
<a href="#intro">In√≠cio</a>
<a href="#sobre">Sobre</a>
<a href="#servicos">Servi√ßos</a>
<a href="#galeria">Galeria</a>
<a href="#avaliacoes">Avalia√ß√µes</a>
<a href="#contato">Contato</a>
<a href="#agendamento">Agendamento</a>
<a href="https://wa.me/5583994147741" target="_blank">WhatsApp</a>
</nav>
</header>

<!-- Hero -->
<section class="hero">
<img src="2.png" alt="Banner KB Lava Jato">
</section>

<!-- Introdu√ß√£o -->
<section id="intro">
<h1>Bem-vindo ao KB Lava Jato</h1>
<p>Especialistas em lavagem automotiva de qualidade: simples, completa, detalhada e polimento profissional.</p>
</section>

<!-- Sobre -->
<section id="sobre">
<h2>Sobre o KB Lava Jato</h2>
<p>O <strong>KB Lava Jato</strong> oferece atendimento diferenciado e servi√ßos de qualidade para quem valoriza o cuidado com seu ve√≠culo.</p>
</section>

<!-- Servi√ßos -->
<section id="servicos">
<h2>Nossos Servi√ßos</h2>
<table style="width:100%;border-collapse:collapse;color:#e6eef8;">
<thead>
<tr><th>Servi√ßo</th><th>Descri√ß√£o</th><th>Pre√ßo</th></tr>
</thead>
<tbody>
<tr><td>Lavagem Simples</td><td>Remo√ß√£o b√°sica de sujeiras externas com jato d'√°gua e shampoo neutro.</td><td>R$20,00</td></tr>
<tr><td>Lavagem Completa</td><td>Lavagem externa e interna com aspira√ß√£o, painel, vidros e rodas.</td><td>R$40,00</td></tr>
<tr><td>Lavagem Detalhada</td><td>Higieniza√ß√£o minuciosa de cada canto do ve√≠culo.</td><td>R$60,00</td></tr>
<tr><td>Polimento</td><td>Restaura√ß√£o do brilho da pintura com ceras especiais.</td><td>R$100,00</td></tr>
</tbody>
</table>
</section>

<!-- Galeria -->
<section id="galeria">
<h2>Galeria de Fotos</h2>
<div class="fotos">
<img src="3.jpg" alt="Lavagem de carro">
<img src="4.jpg" alt="Motocicleta sendo lavada">
<img src="5.jpg" alt="Produtos automotivos">
<img src="6.jpg" alt="√Årea externa com ve√≠culos">
</div>
</section>

<!-- Avalia√ß√µes -->
<section id="avaliacoes">
<h2>Deixe sua Avalia√ß√£o</h2>
<p>Gostou do nosso servi√ßo? Clique abaixo:</p>
<div><a href="https://docs.google.com/forms/d/e/1FAIpQLSfRjXz0QMM3ky2I3QoP5Y0Z0Te2xnO6kTrn_slBahCucvTYkw/viewform?usp=header" target="_blank" style="color:#ff7a00;">Avaliar</a></div>
</section>

<!-- Contato -->
<section id="contato">
<h2>Fale Conosco</h2>
<form id="formulario">
<input type="text" id="nomeContato" placeholder="Seu nome" required>
<textarea id="mensagem" placeholder="Digite sua mensagem" required></textarea>
<button type="submit">Enviar Mensagem</button>
</form>
</section>

<!-- Agendamento -->
<section id="agendamento">
<h2>Agende seu Servi√ßo</h2>
<div class="cards">
<div class="card">
<form id="form-agendamento">
<input type="text" id="agendamento-nome" placeholder="Nome completo" required>
<input type="tel" id="agendamento-telefone" placeholder="Telefone" required>
<input type="text" id="agendamento-placa" placeholder="Placa do ve√≠culo" maxlength="8">
<select id="agendamento-veiculo" required>
<option value="">Tipo de ve√≠culo</option>
<option value="Carro">Carro</option>
<option value="Moto">Moto</option>
</select>
<select id="agendamento-servico" required>
<option value="">Servi√ßo</option>
<option value="Lavagem Simples">Lavagem Simples</option>
<option value="Lavagem Completa">Lavagem Completa</option>
<option value="Polimento">Polimento</option>
<option value="Higieniza√ß√£o">Higieniza√ß√£o</option>
</select>
<input type="date" id="agendamento-data" required>
<select id="agendamento-hora" required>
<option value="">Hor√°rio</option>
<option>08:00</option>
<option>09:00</option>
<option>10:00</option>
<option>11:00</option>
<option>13:00</option>
<option>14:00</option>
<option>15:00</option>
<option>16:00</option>
<option>17:00</option>
</select>
<button type="submit">Agendar</button>
<p style="font-size:12px;color:#94a3b8;">Hor√°rios fixos. O sistema evita duplicidade e envia confirma√ß√£o por e-mail.</p>
</form>
</div>
<div class="card">
<h3>Pr√≥ximos Agendamentos</h3>
<div id="lista" class="list"><div style="color:#94a3b8;">Carregando...</div></div>
</div>
</div>
</section>

<!-- Footer -->
<footer>
<p>&copy; 2025 KB Lava Jato | <a href="https://wa.me/5583994147741">WhatsApp</a></p>
</footer>

<!-- Script Agendamento -->
<script type="module">
import { collection, addDoc, query, where, getDocs, orderBy } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const form = document.getElementById("form-agendamento");
const botao = form.querySelector("button");
const listaEl = document.getElementById("lista");

async function carregarLista() {
  listaEl.innerHTML = '<div style="color:#94a3b8;">Carregando...</div>';
  try {
    const q = query(collection(db,'agendamentos'), orderBy('timestamp','desc'));
    const snap = await getDocs(q);
    if(snap.empty){ listaEl.innerHTML='<div style="color:#94a3b8;">Nenhum agendamento encontrado.</div>'; return; }
    listaEl.innerHTML='';
    snap.forEach(doc=>{
      const d = doc.data();
      const el = document.createElement('div');
      el.className='item';
      el.innerHTML = `<div><strong>${d.nome}</strong><div style="font-size:12px;color:#94a3b8;">${d.data} ‚Ä¢ ${d.hora} ‚Äî ${d.veiculo}</div></div><div style="font-size:12px;color:#94a3b8;">${d.servico}</div>`;
      listaEl.appendChild(el);
    });
  } catch(e){ console.error(e); listaEl.innerHTML='<div style="color:#94a3b8;">Erro ao carregar.</div>'; }
}

form.addEventListener("submit", async function(e){
  e.preventDefault();
  botao.disabled=true;
  botao.textContent="Enviando...";
  const dados={
    nome: document.getElementById("agendamento-nome").value,
    telefone: document.getElementById("agendamento-telefone").value,
    placa: document.getElementById("agendamento-placa").value.toUpperCase().replace(/\s/g,''),
    veiculo: document.getElementById("agendamento-veiculo").value,
    servico: document.getElementById("agendamento-servico").value,
    data: document.getElementById("agendamento-data").value,
    hora: document.getElementById("agendamento-hora").value
  };
  try{
    const q = query(collection(db,"agendamentos"), where("data","==",dados.data), where("hora","==",dados.hora));
    const resultado = await getDocs(q);
    if(!resultado.empty){ alert("‚ùå Este hor√°rio j√° est√° agendado."); botao.disabled=false; botao.textContent="Agendar"; return; }
    await emailjs.send("service_r18876j","template_d9x4uep",dados);
    await addDoc(collection(db,"agendamentos"),{...dados,timestamp:new Date()});
    alert("‚úÖ Agendamento realizado com sucesso! Confira seu e-mail üì©");
    form.reset();
    carregarLista();
  } catch(err){ console.error(err); alert("‚ùå Ocorreu um erro. Tente novamente."); }
  botao.disabled=false; botao.textContent="Agendar";
});

carregarLista();
</script>

</body>
</html>
